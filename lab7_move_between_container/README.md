## Сценарий 7: Межконтейнерное проникновение через неразделённую сеть**Уровень сложности:** продвинутый  
**Описание**:
Два сервиса (attacker и target) развернуты в одной сети Docker Compose без сегментации. Target предоставляет конфиденциальную информацию (например, файл с данными), а атакующий сервис может, используя простейший эксплойт, получить доступ к этим данным через HTTP-запросы. Студент должен обнаружить, что отсутствие сегментации сети позволяет атакующему перемещаться между контейнерами, и настроить разделение сети для ограничения доступа.

### Запуск
- Сборка
```sh
docker-compose up --build
```
- Проверьте работу target: откройте браузер и перейдите по адресу http://localhost:4000 – вы должны увидеть содержимое файла data.txt.

- Проверьте логи контейнера attacker:
```
docker logs attacker
```
– В логах будет выведено:
Полученные данные из target: Секретные данные: Код доступа 987654321 Это подтверждает, что атакующий контейнер смог получить конфиденциальные данные из target.

### Фикс
Для защиты можно разделить сервисы по разным сетям или использовать сеть с внутренним доступом. Например, сделаем target доступным только для attacker (а attacker не должен иметь доступ к нему, если они не принадлежат к одной защищённой группе).

Изменённый docker-compose.yml:
```yml
version: "3.8"
services:
  target:
    build:
      context: ./target
    container_name: target
    networks:
      - target_net
    ports:
      - "4000:4000"

  attacker:
    build:
      context: ./attacker
    container_name: attacker
    depends_on:
    - target
    networks:
      - attacker_net

networks:
  target_net:
    driver: bridge
  attacker_net:
    driver: bridge
```
После изменений убедитесь, что attacker не может получить данные из target.
